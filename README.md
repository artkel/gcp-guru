# GCP Guru - Professional Cloud Architect Exam Prep

A sophisticated flashcard learning application for Google Cloud Platform Professional Cloud Architect certification preparation, featuring AI-powered explanations, interactive session history charts, and comprehensive progress tracking.

## âœ¨ Latest Updates (v2.3)

- **ðŸš€ Production-Ready Architecture**: Major infrastructure upgrade for robustness and security.
- **âš¡ï¸ Firestore Database**: Migrated all transactional data (questions, user progress) to Firestore for improved performance and data integrity.
- **ðŸ”’ Secret Manager**: Gemini API keys are now securely stored and managed via Google Secret Manager.
- **ðŸ¤– Automated CI/CD**: New automated deployment pipeline using **Cloud Build**, triggered on every push to the main branch.
- **ðŸ›¡ï¸ Secure Backend**: The backend service is now private and only accessible via the frontend, using service-to-service authentication.
- **ðŸ”€ Answer Shuffling**: Revolutionary answer randomization system to prevent answer memorization and promote true understanding.

## Features

### ðŸŽ¯ **Smart Learning System**
- **Answer Shuffling**: Optional answer randomization to prevent memorization and promote true understanding.
- **Letter-Free AI**: Advanced AI explanations that work regardless of answer order, eliminating letter-based references.
- Adaptive question selection based on performance.
- Spaced repetition algorithm preventing question repetition in the same session.
- Domain-specific training sessions with customizable tag filtering.
- Progress-based scoring system (Mistakes â†’ Learning â†’ Mastered â†’ Perfected).

### ðŸ§  **AI-Powered Assistance**
- **AI Explanations**: Detailed explanations generated by Google's **Gemini 2.5 Flash** model.
- **Case Study Context**: For relevant questions, the AI is provided with the full text of the corresponding GCP case study (e.g., Mountkirk Games, TerramEarth) for more precise and context-aware explanations.
- **Smart Hints**: Contextual hints without revealing answers.
- **Content Regeneration**: Get alternative explanations with different perspectives.
- **Intelligent Caching**: Explanations and hints are cached in Firestore for performance.

### ðŸ“Š **Advanced Progress Dashboard**
- **Mastery Progress Bar**: Visual stacked progress bar showing overall mastery distribution.
- **Enhanced Progress Categories**:
  - ðŸ”´ **Mistakes** (-1): Questions answered incorrectly.
  - ðŸŸ¡ **Learning** (0-1): Questions being learned.
  - ðŸŸ¢ **Mastered** (2-3): Well-understood questions.
  - ðŸŸ£ **Perfected** (4+): Fully mastered questions (excluded from training).
- **Individual Session Tracking**: Accurate last session display with individual session history.
- **Topic-Based Analytics**: Performance tracking by GCP domain.
- **Interactive Session History Chart**: 30-day visual timeline with optimized performance.
- **Mastery Metrics**: Color-coded progress indicators.
- **Training Time Tracking**: Total study time with detailed session breakdowns.

### ðŸŽ¨ **Modern User Experience**
- **View Case Studies**: For questions tagged with a case study, click the badge to open the full text in a modal or a separate window.
- **Responsive Design**: Works perfectly on desktop, tablet, and mobile.
- **Session Persistence**: Page refreshes preserve your exact training state.
- **Accessible Components**: Screen reader friendly with keyboard navigation.

### ðŸš€ **Modern Tech Stack**
- **Backend**: FastAPI with Python.
- **Frontend**: Next.js 14 with TypeScript and React 18.
- **Database**: **Google Firestore** for all transactional data.
- **Static Storage**: **Google Cloud Storage** for case study assets.
- **CI/CD**: **Google Cloud Build** for automated deployments.
- **Secret Management**: **Google Secret Manager**.
- **Compute**: **Google Cloud Run** with cost-optimized scaling.
- **State Management**: Zustand with localStorage persistence.
- **UI Components**: Radix UI primitives with Tailwind CSS.

## Quick Start

### Prerequisites
- **Node.js** 18+ (for frontend)
- **Python** 3.8+ (for backend)
- **Google Gemini API key** (for local development)

### Local Installation

The local development setup remains the same and is perfect for feature development and testing.

1.  **Clone the repository**:
    ```bash
    git clone https://github.com/artkel/gcp-guru.git
    cd gcp-guru
    ```

2.  **Set up backend environment**:
    ```bash
    cd backend
    python3 -m venv venv
    source venv/bin/activate  # On Windows: venv\Scripts\activate
    pip install -r requirements.txt
    
    # Create .env file in the /backend directory for local development
    echo "GOOGLE_API_KEY=your_gemini_api_key_here" > .env
    cd ..
    ```

3.  **Install frontend dependencies**:
    ```bash
    cd frontend
    npm install
    cd ..
    ```

4.  **Start the application**:
    ```bash
    # From the project root, this starts both backend and frontend concurrently
    npm run dev
    ```
    The frontend will run on `http://localhost:3000` and automatically proxy API requests to the backend running on `http://localhost:8000`.

5.  **Access the application**:
    - Open your browser to `http://localhost:3000`.

## Project Structure

The project is a monorepo with a separate `backend` and `frontend`.

```
gcp-guru/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ services/            # Core application logic
â”‚   â”œâ”€â”€ main.py              # FastAPI application entry point
â”‚   â””â”€â”€ ...
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ src/                 # Next.js source code
â”‚   â””â”€â”€ ...
â”œâ”€â”€ data/                    # Local data for seeding Firestore
â”œâ”€â”€ documentation/
â”‚   â”œâ”€â”€ DEPLOYMENT_GUIDE.md
â”‚   â””â”€â”€ ...
â”œâ”€â”€ cloudbuild.yaml          # CI/CD pipeline configuration
â””â”€â”€ README.md                # This file
```

## Cloud Deployment

The application is deployed on a robust, production-ready GCP architecture.

- **Automated Deployments**: The entire deployment process is automated via a **Cloud Build** CI/CD pipeline. To deploy any changes, simply push your commits to the `main` branch.
- **Infrastructure**: 
  - **Backend**: Private FastAPI service on **Cloud Run**.
  - **Frontend**: Public Next.js service on **Cloud Run**.
  - **Database**: **Firestore** stores all question and user progress data.
  - **Static Files**: **Cloud Storage** hosts the case study markdown files.
  - **Secrets**: The Gemini API key is securely stored in **Secret Manager**.

For a detailed guide on the one-time setup for the cloud environment, see [`documentation/DEPLOYMENT_GUIDE.md`](documentation/DEPLOYMENT_GUIDE.md).

## Adding New Questions to Production

Once your application is deployed, question data lives in **Firestore**, not in JSON files. To add new questions without overwriting user progress (scores, notes, explanations):

1. **Prepare your new questions file** in JSON format (e.g., `data/new_questions.json`)
2. **Authenticate with Google Cloud:**
   ```bash
   gcloud auth application-default login
   ```
3. **Run the migration script:**
   ```bash
   python backend/scripts/add_new_questions.py data/new_questions.json
   ```

The script intelligently:
- âœ… Adds new questions to Firestore
- âœ… Skips existing questions (preserves all user data)
- âœ… Shows a clear summary of added/skipped questions

**To update existing questions** while preserving user progress:
```bash
python backend/scripts/add_new_questions.py data/new_questions.json --overwrite
```

This preserves scores, stars, notes, and AI-generated explanations/hints while updating question text and answers.

## Troubleshooting

### Common Issues

**AI features not working (local development):**
1.  Ensure your `.env` file is in the `backend/` directory.
2.  Verify your `GOOGLE_API_KEY` is correct.
3.  Restart the backend server after changing the `.env` file.

**Frontend not connecting to backend (local development):**
1.  Ensure both services are running via `npm run dev` from the root directory.

**Cold start delays (Cloud deployment):**
1.  The first request after a period of inactivity may take 2-3 seconds. This is normal for a cost-optimized configuration that scales to zero.
2.  Subsequent requests will be fast.
